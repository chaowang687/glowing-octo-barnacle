# 角色选择系统知识库

## 模块概述
角色选择系统是一个完整的角色选择系统，支持角色预览、选择、开始游戏等功能。

## 核心功能
- 角色预览
- 角色选择
- 开始游戏
- 存档清理

## 核心文件和类

### 1. CharacterSelectionManager.cs
- **位置**: `Assets/CharacterSelection/CharacterSelectionManager.cs`
- **功能**: 角色选择管理器，负责角色预览、选择和游戏开始
- **主要功能**:
  - 角色预览
  - 角色选择
  - 开始游戏
  - 存档清理

### 2. SelectionButton.cs
- **位置**: `Assets/CharacterSelection/SelectionButton.cs`
- **功能**: 角色选择按钮，负责单个角色的选择按钮
- **主要功能**:
  - 按钮点击处理
  - 高亮效果

## 关键API和方法

### CharacterSelectionManager
- `SelectCharacter(CharacterBase character, SelectionButton clickedButton)`: 选择角色
- `OnStartGameClicked()`: 开始游戏
- `RefreshPreview(CharacterBase character)`: 刷新预览

### SelectionButton
- `SetHighlight(bool isHighlighted)`: 设置高亮状态

## 使用示例

### 1. 选择角色
```csharp
// 选择角色
characterSelectionManager.SelectCharacter(character, clickedButton);
```

### 2. 开始游戏
```csharp
// 开始游戏
characterSelectionManager.OnStartGameClicked();
```

## 配置和依赖
- **角色列表**: 需要设置可用角色列表
- **预览UI**: 需要设置预览UI组件
- **开始按钮**: 需要设置开始按钮

## 常见问题和解决方案

### 1. 角色不显示
**原因**: 角色列表为空或预览UI未设置
**解决方案**: 检查角色列表配置，确保预览UI正确设置

### 2. 开始游戏后存档未清理
**原因**: 存档清理逻辑未执行
**解决方案**: 检查OnStartGameClicked方法中的存档清理逻辑

### 3. 角色选择后预览不更新
**原因**: RefreshPreview方法未正确执行
**解决方案**: 检查SelectCharacter方法中的RefreshPreview调用

## 扩展建议
- 添加角色解锁系统
- 实现角色属性预览
- 添加角色皮肤系统
- 实现角色选择动画