# 基于透明网格的背包拖拽系统改造

## 方案概述
将当前基于物品图片的拖拽判定机制，改为基于透明网格的判定机制，即背包乱斗的实现方式。

## 核心思路
1. **取消物品图片的Raycast Target**，不再让图片本身处理点击事件
2. **创建透明网格系统**，在背景放置Grid Layout，铺满透明的Slot
3. **将点击事件挂在每个Slot上**，由Slot处理点击和拖拽逻辑
4. **通过网格数据定位物品**，点击Slot后查询对应位置的物品

## 实现步骤

### 1. 创建Slot组件
- 新建`Slot.cs`脚本，用于表示单个网格单元格
- 包含点击、拖拽开始、拖拽结束等事件处理
- 关联到对应的网格坐标

### 2. 改造InventoryGrid
- 在`InventoryGrid`中添加Slot的创建和管理逻辑
- 初始化时生成对应数量的透明Slot
- 维护Slot与网格坐标的映射关系

### 3. 修改ItemUI组件
- 取消`iconImage`的Raycast Target勾选
- 移除ItemUI上的拖拽相关事件（OnBeginDrag、OnDrag、OnEndDrag）
- 保留视觉更新和旋转逻辑

### 4. 实现拖拽逻辑
- 在Slot组件中处理拖拽开始事件，查询对应位置的物品
- 创建新的拖拽管理器，处理拖拽过程中的位置计算和预览
- 实现拖拽结束时的物品放置逻辑

### 5. 调整网格与物品的交互
- 修改物品放置、移除、旋转等逻辑，确保与Slot系统兼容
- 更新形状预览系统，使其与透明网格配合工作

## 预期效果
- 解决空白区域点击响应问题
- 拖拽判定更准确，完全基于网格系统
- 与背包乱斗的交互体验一致
- 逻辑更严密，不受图片形状影响

## 技术要点
- 使用Grid Layout Group布局透明Slot
- 利用EventSystem实现Slot的点击事件
- 通过网格坐标映射实现物品定位
- 分离UI表现与逻辑判定

## 影响范围
- 物品拖拽功能
- 点击选中功能
- 旋转功能
- 放置预览功能

这个改造方案将彻底改变当前的拖拽判定机制，实现与背包乱斗一致的交互体验，同时解决当前系统存在的问题。