# 卡牌多语言配置计划

## 卡牌系统分析

当前卡牌系统使用ScriptableObject存储卡牌数据，主要包括：

* `CardData.cs`：ScriptableObject，存储卡牌名称、描述等文本字段

* `CardDisplay.cs`：负责将CardData中的文本显示到UI组件上

* 卡牌文本直接硬编码在ScriptableObject中，无法动态切换语言

## 配置方案

### 1. 修改CardData.cs

* 将硬编码的文本字段替换为本地化键

* 添加本地化相关属性

```csharp
// 修改前
public string cardName = "新卡牌";
[TextArea] public string description = "描述";

// 修改后
public string cardNameKey = "card_default_name";
public string descriptionKey = "card_default_description";
```

### 2. 修改CardDisplay.cs

* 添加LocalizeStringEvent组件支持

* 替换直接设置文本的方式为使用本地化组件

* 确保卡牌初始化时正确配置本地化

```csharp
// 添加本地化组件引用
[Header("Localization")]
public LocalizeStringEvent nameLocalizeEvent;
public LocalizeStringEvent descriptionLocalizeEvent;

// 修改初始化方法
if (nameLocalizeEvent != null) {
    nameLocalizeEvent.StringReference.TableReference = "GameTextTable";
    nameLocalizeEvent.StringReference.EntryReference = data.cardNameKey;
}
if (descriptionLocalizeEvent != null) {
    descriptionLocalizeEvent.StringReference.TableReference = "GameTextTable";
    descriptionLocalizeEvent.StringReference.EntryReference = data.descriptionKey;
}
```

### 3. 配置UI组件

* 为卡牌UI添加LocalizeStringEvent组件

* 配置On Update String事件指向对应的TMP Text组件

### 4. 更新现有卡牌

* 为所有现有卡牌设置本地化键

* 在GameTextTable中添加对应的本地化条目

### 5. 测试语言切换

* 确保卡牌文本在语言切换时能自动更新

* 测试不同卡牌的本地化显示

## 实现步骤

1. **修改CardData.cs**

   * 添加本地化键字段

   * 保留原有文本字段作为备份和默认值

2. **修改CardDisplay.cs**

   * 添加LocalizeStringEvent支持

   * 修改初始化逻辑

3. **更新卡牌UI预制体**

   * 添加LocalizeStringEvent组件

   * 配置事件绑定

4. **批量更新现有卡牌**

   * 为现有卡牌设置本地化键

   * 在GameTextTable中添加对应条目

5. **测试验证**

   * 运行游戏测试语言切换

   * 确保所有卡牌文本正确显示

## 预期效果

* 卡牌名称和描述支持中英文切换

* 与项目现有本地化系统无缝集成

* 支持动态添加新卡牌和语言

* 语言切换时卡牌文本自动更新

## 注意事项

* 保持本地化键的唯一性

* 确保所有现有卡牌都有对应的本地化条目

* 考虑卡牌升级时的本地化处理

* 确保性能不受影响

